<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>More flexibility in dividing servants among threads</title><link rel="stylesheet" href="boostbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="index.html" title="Boost Asynchronous"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Using Asynchronous"><link rel="prev" href="ch03s11.html" title="Composite Threadpool Scheduler"><link rel="next" href="ch03s13.html" title="Processor binding"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">More flexibility in dividing servants among threads</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s11.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Using Asynchronous</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03s13.html">Next</a></td></tr></table><hr></div><div class="sect1" title="More flexibility in dividing servants among threads"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1038"></a>More flexibility in dividing servants among threads</h2></div></div></div><p>TODO example and code. We saw how to assign a servant or several servants to a
                    single thread scheduler. We can also create schedulers and divide servants among
                    them. This is very powerful but still has some constraints:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>We need to assign servants to schedulers while what we want is to
                                assign them to threads. We also have to consider how many schedulers
                                to create. This is not very flexible.</p></li><li class="listitem"><p>If a servant is taking too long, it blocks all other servants
                                living inside this thread context. This increases latency.</p></li></ul></div><p>We can increase the flexibility and reduce latency by using a
                        <code class="code">multiple_thread_scheduler</code>. This scheduler takes as first
                    argument a number of threads to use and a maximum number of client "worlds"
                    (clients living logically in the same thread context). What it does, is to
                    assign any of its threads to different client worlds, but only one thread can
                    service a world at a time. This means that the thread safety of servants is
                    preserved. At the same time, having any number of threads decreases latency
                    because if a servant keeps its thread busy, it does not block other servants
                    from being serviced. As we can choose the number of threads this scheduler will
                    use, we achieve very fine granularity in planing our thread resources.</p><p>Another interesting characteristics of this scheduler is that its threads
                    service its servants in order. If a thread serviced servant x, it next tries to
                    service servant x+1. This makes for good pipelining capabilities as it increases
                    the odds that task is koved from a pipeline stage to the next one by the same
                    thread and will be hot in its cache.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s11.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03s13.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Composite Threadpool Scheduler&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Processor binding</td></tr></table></div></body></html>